{"abstract":[{"type":"text","text":"This guide will explain how to register new users with the passage-ios framework."}],"schemaVersion":{"patch":0,"major":0,"minor":3},"kind":"article","primaryContentSections":[{"content":[{"level":2,"text":"Overview","type":"heading","anchor":"Overview"},{"inlineContent":[{"text":"Register a new user on your application.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Registration will either prompt the user to create a new Passkey for your domain or it will send the user a Magic Link that when clicked will perform the registration. On success of either path it will register a new user on your Passage app. The method chooses the Passkey or Magic Link flow depending on the iOS Version and how your Passage application is configured."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"If the version of iOS is less than v16 or you have your Passage application configured to require identifier verification a magic link will be sent.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If the version of iOS is v16+ and you do not require identifier verification the register method will attempt to create a new Passkey on the device. The user can cancel this action, and if they do, then the user will be sent a magic link."}]},{"inlineContent":[{"type":"text","text":"If the magic link is set, your application must be configured to handle this link on the device so that registration can be completed and the user given the option to create a Passkey (if supported)."}],"type":"paragraph"},{"inlineContent":[{"text":"The registration method returns a tuple with two optionals","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["(authResult: AuthResult?, magicLink: MagicLink?)"],"syntax":null},{"inlineContent":[{"type":"text","text":"You will need to check whether the authResult or magicLink or none of these are returned. If authResult was returned, then the user was registered and authenticated, if magicLink was returned then the user was sent a magic link. If neither value is returned no action was performed."}],"type":"paragraph"},{"type":"codeListing","syntax":null,"code":["\/\/ Unmanaged tokens","do {","    let result = try await PassageAuth.register(identifier: identifier)","","","    if let authResult = result.authResult {","        print(\"users auth token: \\(authResult.auth_token)\")","        \/\/ user was registered","        \/\/ store your token and proceed with login","    } else if let magicLink = result.magicLink {","        print(\"users magic link id: \\(magicLink.id)\")","        \/\/ magic link was sent, prompt user to check for magic link.","    } else {","        \/\/ no successful results","    }","}","} catch {","    \/\/ an error occured","}"]},{"type":"codeListing","syntax":null,"code":["\/\/ Managed tokens","do {","","    let Passage = PassageAuth(tokenStore: PassageStore.shared)","","    let result = try await passage.register(identifier: identifier)","","    if let authResult = result.authResult {","        print(\"users auth token: \\(authResult.auth_token)\")","        print(\"users auth token from store: \\(PassageStore.shared.authToken)\")","        \/\/ user was registered","    } else if let magicLink = result.magicLink {","        print(\"users magic link id: \\(magicLink.id)\")","        \/\/ magic link was sent, prompt user to check for magic link.","    } else {","        \/\/ no successful results","    }","}","} catch {","    \/\/ an error occured","}",""]}],"kind":"content"}],"metadata":{"role":"article","title":"User Registration","roleHeading":"Article","modules":[{"name":"Passage"}]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Passage\/documentation\/Passage\/Guide_Registration"},"hierarchy":{"paths":[["doc:\/\/Passage\/documentation\/Passage"]]},"sections":[],"seeAlsoSections":[{"identifiers":["doc:\/\/Passage\/documentation\/Passage\/Guide_PassageFramework","doc:\/\/Passage\/documentation\/Passage\/Guide_Login","doc:\/\/Passage\/documentation\/Passage\/Guide_PasskeyAutofill","doc:\/\/Passage\/documentation\/Passage\/Guide_SessionManagement"],"generated":true,"title":"Guides"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/passage\/guide_registration"]}],"references":{"doc://Passage/documentation/Passage/Guide_PasskeyAutofill":{"title":"Guide PasskeyAutofill","type":"topic","identifier":"doc:\/\/Passage\/documentation\/Passage\/Guide_PasskeyAutofill","abstract":[{"type":"text","text":"Enable Passkey autofill to make it easier for your users to login with Passkeys."}],"role":"article","url":"\/documentation\/passage\/guide_passkeyautofill","kind":"article"},"doc://Passage/documentation/Passage/Guide_Login":{"identifier":"doc:\/\/Passage\/documentation\/Passage\/Guide_Login","role":"article","abstract":[{"type":"text","text":"This guide will explain how to log in users with the passage-ios framework."}],"url":"\/documentation\/passage\/guide_login","title":"Login","kind":"article","type":"topic"},"doc://Passage/documentation/Passage/Guide_PassageFramework":{"role":"article","url":"\/documentation\/passage\/guide_passageframework","identifier":"doc:\/\/Passage\/documentation\/Passage\/Guide_PassageFramework","abstract":[{"text":"This guide provides a high level view of the passage-ios framework and how to get started with it.","type":"text"}],"kind":"article","type":"topic","title":"Getting Started"},"doc://Passage/documentation/Passage/Guide_SessionManagement":{"role":"article","url":"\/documentation\/passage\/guide_sessionmanagement","identifier":"doc:\/\/Passage\/documentation\/Passage\/Guide_SessionManagement","abstract":[{"text":"This guide provides an overview of how session management is handled using Passage and how to use passage-ios to handle refresh tokens.","type":"text"}],"kind":"article","type":"topic","title":"Session Management"},"doc://Passage/documentation/Passage":{"kind":"symbol","type":"topic","abstract":[{"text":"Use Passage to add exclusively Passwordless authentication to your iOS Application.","type":"text"}],"url":"\/documentation\/passage","title":"Passage","identifier":"doc:\/\/Passage\/documentation\/Passage","role":"collection"}}}