{"metadata":{"role":"article","title":"Session Management","roleHeading":"Article","modules":[{"name":"Passage"}]},"hierarchy":{"paths":[["doc:\/\/Passage\/documentation\/Passage"]]},"sections":[],"schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"text":"This guide provides an overview of how session management is handled using Passage and how to use passage-ios to handle refresh tokens.","type":"text"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Passage\/documentation\/Passage\/Guide_SessionManagement"},"seeAlsoSections":[{"identifiers":["doc:\/\/Passage\/documentation\/Passage\/Guide_PassageFramework","doc:\/\/Passage\/documentation\/Passage\/Guide_Registration","doc:\/\/Passage\/documentation\/Passage\/Guide_Login","doc:\/\/Passage\/documentation\/Passage\/Guide_PasskeyAutofill"],"generated":true,"title":"Guides"}],"primaryContentSections":[{"content":[{"level":2,"text":"Overview","type":"heading","anchor":"Overview"},{"inlineContent":[{"text":"Passage supports a variety of session management capabilities that improve security and end user experience by enabling long-lived sessions and token revocation support. Learn more about session management with Passage through the ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/docs.passage.id\/auth-configuration\/session-management"},{"type":"text","text":"."}],"type":"paragraph"},{"anchor":"Using-Refresh-Token-in-Your-Application","text":"Using Refresh Token in Your Application","level":2,"type":"heading"},{"inlineContent":[{"type":"text","text":"Once refresh tokens are enabled, future login requests will include a "},{"type":"codeVoice","code":"refresh_token"},{"text":" in the ","type":"text"},{"code":"AuthResult","type":"codeVoice"},{"text":". If you are using the default ","type":"text"},{"type":"codeVoice","code":"PassageTokenStore"},{"type":"text","text":" then the storage of this token will be handled. You only want to use refresh tokens when an auth token is expired. You should NOT refresh the token on every API request. You can use the "},{"code":"getAuthToken()","type":"codeVoice"},{"type":"text","text":" functions of PassageAuth to get teh correct auth token to send to your application. This checks if the auth token is expired and tries to refresh it silently as needed."}],"type":"paragraph"},{"code":["\/\/ Unmanaged tokens","do {","    let result = try await PassageAuth.authToken(authToken: authToken, refreshToken: refreshToken)","    print(\"users auth token: \\(result.auth_token)\")","    print(\"users refresh token: \\(result.refresh_token)\")","    \/\/ store your tokens and proceed with backend API call","}","} catch PassageSessionError.loginRequired {","    \/\/ refresh token has expired, need to log user in again","}"],"syntax":null,"type":"codeListing"},{"type":"codeListing","syntax":null,"code":["\/\/ Managed tokens","do {","","    let Passage = PassageAuth(tokenStore: PassageStore.shared)","","    let authToken = try await passage.getAuthToken()","    print(\"users auth token: \\(authResult.auth_token)\")","    \/\/ proceed with backend API call","}","} catch PassageSessionError.loginRequired {","    \/\/ refresh token has expired, need to log user in again","}",""]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When a user logs out of your application call the "},{"code":"signOut()","type":"codeVoice"},{"type":"text","text":" instance method or static function to revoke the refresh token for the current session."}]}],"kind":"content"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/passage\/guide_sessionmanagement"]}],"kind":"article","references":{"doc://Passage/documentation/Passage/Guide_PasskeyAutofill":{"type":"topic","title":"Guide PasskeyAutofill","identifier":"doc:\/\/Passage\/documentation\/Passage\/Guide_PasskeyAutofill","kind":"article","url":"\/documentation\/passage\/guide_passkeyautofill","abstract":[{"type":"text","text":"Enable Passkey autofill to make it easier for your users to login with Passkeys."}],"role":"article"},"https://docs.passage.id/auth-configuration/session-management":{"identifier":"https:\/\/docs.passage.id\/auth-configuration\/session-management","title":"online documentation","titleInlineContent":[{"type":"text","text":"online documentation"}],"type":"link","url":"https:\/\/docs.passage.id\/auth-configuration\/session-management"},"doc://Passage/documentation/Passage/Guide_PassageFramework":{"type":"topic","title":"Getting Started","identifier":"doc:\/\/Passage\/documentation\/Passage\/Guide_PassageFramework","kind":"article","url":"\/documentation\/passage\/guide_passageframework","abstract":[{"type":"text","text":"This guide provides a high level view of the passage-ios framework and how to get started with it."}],"role":"article"},"doc://Passage/documentation/Passage/Guide_Login":{"type":"topic","title":"Login","identifier":"doc:\/\/Passage\/documentation\/Passage\/Guide_Login","kind":"article","url":"\/documentation\/passage\/guide_login","abstract":[{"text":"This guide will explain how to log in users with the passage-ios framework.","type":"text"}],"role":"article"},"doc://Passage/documentation/Passage/Guide_Registration":{"title":"User Registration","role":"article","url":"\/documentation\/passage\/guide_registration","identifier":"doc:\/\/Passage\/documentation\/Passage\/Guide_Registration","type":"topic","abstract":[{"type":"text","text":"This guide will explain how to register new users with the passage-ios framework."}],"kind":"article"},"doc://Passage/documentation/Passage":{"url":"\/documentation\/passage","identifier":"doc:\/\/Passage\/documentation\/Passage","kind":"symbol","type":"topic","title":"Passage","role":"collection","abstract":[{"type":"text","text":"Use Passage to add exclusively Passwordless authentication to your iOS Application."}]}}}